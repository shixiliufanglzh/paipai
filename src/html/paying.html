<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>支付确认</title>
    <script>
        (function (doc, win) {
            var docEl = doc.documentElement,
                    resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
                    recalc = function () {
                        var clientWidth = docEl.clientWidth;
                        if (!clientWidth) return;
                        if(clientWidth>=640){
                            docEl.style.fontSize = '100px';
                        }else{
                            docEl.style.fontSize = 100 * (clientWidth / 750) + 'px';
                        }
                    };

            if (!doc.addEventListener) return;
            win.addEventListener(resizeEvt, recalc, false);
            doc.addEventListener('DOMContentLoaded', recalc, false);
        })(document, window);
    </script>
    <link rel="stylesheet" href="../style/paying.css">
</head>
<body>
<div id="paying">
    <section id="addrMsg">
        <div class="addressee">
            <p><span class="name">某某先生</span><span class="phone">13623456789</span></p>
            <p class="address">上海市浦东新区周浦镇上南路7992弄泰苑公寓13号楼602室</p>
        </div>
        <div class="bottom_img"></div>
    </section>

    <section id="payingDetail">
        <div class="number"><span class="title">订单编号</span><span class="content order_num">1456456456</span></div>
        <div class="count"><span class="title">订单金额</span><span class="content red order_price">￥108.00</span></div>
    </section>

    <section id="payingPath">
        <div class="alipay"><i class="icon_pay"></i><span>支付宝支付</span><i class="arrow"></i></div>
        <div class="wechat"><i class="icon_pay"></i><span>微信支付</span><i class="arrow"></i></div>
    </section>

</div>


</body>
<script src="../../bower_components/jquery/dist/jquery.min.js"></script>
<script src="../script/paipaiCompnt.js"></script>
<script>
    var $curOrderId = commonCompt.GetUrlPara('order_id');

    $(function(){
        $.ajax({
            url: GETORDERDETAIL,
            type:'GET',
            dataType:'json',
            data: {orderId: $curOrderId},
            success: function(data){
                console.log(data);
                apiResponse(data.responseCode,data.responseDesc,data.data);
                if(data.responseCode == 2000){
                    var orderMsg = data.data;
                    $('.addressee .name').html(orderMsg.name);
                    $('.addressee .phone').html(orderMsg.tel.substr(0,3) + "****" + orderMsg.tel.substr(7,4));
                    $('.addressee .address').html(orderMsg.area.split(',').join('') + orderMsg.address);

                    $('#payingDetail .order_price').html("￥"+ orderMsg.orderPrice.toFixed(2));
                    $('#payingDetail .order_num').html(orderMsg.orderNum);
                }
            },
            error: function(err){
                console.log(err);
            }
        })

    })


    $('.alipay').click(function(){
        $.ajax({
            url: ORDERPAY,
            type: 'GET',
            dataType: 'json',
            data: {
                payType: 2,
                orderId: $curOrderId
            },
            success: function (data) {
//                console.log('请求参数:',$curOrderId,2,'返回',data);
                apiResponse(data.responseCode,data.responseDesc,data.data);
                if(data.responseCode == 2000){
                    $('body').html(data.data);
                }
            },
            error: function (err) {
//                console.log('请求参数:',$curOrderId,2,'返回',err);
            }
        })
    })




</script>
</html>